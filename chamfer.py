import numpy as np
from scipy.spatial import distance

# Define two sets of points (sensor astra line 6 -> set_A and kinect line 37 -> set_B)
set_A_100 = np.array([
    [100.6367645, 593.5106201, 2178.698975],
    [125.999794, 488.879364, 2114.458496],
    [104.2917252, 149.6486511, 2094.320313],
    [107.4500275, -54.99118042, 2072.356934],
    [146.1627197, 403.2581177, 2291.689209],
    [-10.78676605, 393.1947327, 2220.676025],
    [146.1627197, 111.6621704, 2291.689209],
    [131.4588623, 311.244873, 1979.680908],
    [146.1627197, -155.3651123, 2291.689209],
    [340.797699, 228.7185059, 1835.909546],
    [201.2516174, -168.0711212, 2019.991577],
    [32.87856293, -184.5029755, 2120.921631],
    [128.497345, -566.2248535, 1831.840332],
    [-1.257781029, -619.5349121, 2027.10022],
    [137.8198853, -975.1410522, 1805.037476],
    [82.2947464, -1012.133789, 2110.184082],
    [146.1627197, -264.194458, 2291.689209],
    [382.6654663, 212.2132263, 1807.155273],
    [120.401001, 401.3873901, 2109.264648],
    [120.401001, 401.3873901, 2109.264648]
])

set_B_100 = np.array([
    [100.6719666, 871.5637817, 2159.276367],
    [77.84082031, 763.2202148, 2117.588623],
    [87.68508148, 435.9494934, 2079.401855],
    [91.98124695, 233.7402802, 2048.213623],
    [115.6095886, 636.3069458, 2247.461182],
    [49.1781311, 661.7231445, 1965.020142],
    [115.6095886, 354.3705444, 2247.461182],
    [85.76293945, 469.9833984, 1761.585815],
    [115.6095886, 81.47161865, 2247.461182],
    [195.7979126, 376.3834229, 1530.057861],
    [198.923645, 93.07858276, 2053.357178],
    [-14.00746155, 120.2686691, 1984.830933],
    [108.2102737, -306.2295837, 1885.459961],
    [110.1070633, -290.3496094, 1875.956665],
    [108.2102737, -732.1087036, 1885.459961],
    [207.7293396, -703.4514771, 1841.463623],
    [115.6095886, -23.68541718, 2247.461182],
    [217.8049011, 357.6634216, 1483.752319],
    [80.37509918, 678.9685669, 2107.757813],
    [80.37509918, 678.9685669, 2107.757813]
])

set_A_0 = np.array([
    [0.3780231476, 564.6588135, 2077.658936],
    [-25.22777939, 457.964325, 2129.618896],
    [-42.78187561, 133.2587585, 2118.761719],
    [-47.87962341, -65.11546326, 2092.872803],
    [114.3416443, 366.4434204, 2176.645264],
    [-170.2688446, 380.2510376, 2074.929688],
    [238.800766, 143.8475952, 2285.530518],
    [-327.8029785, 184.3431091, 1957.890625],
    [382.8813477, 31.1997261, 2460.561523],
    [-533.6550903, 67.07290649, 1868.687012],
    [48.80004883, -164.3721619, 2103.413818],
    [-149.2009735, -160.0801392, 2071.936279],
    [44.10560226, -560.9232788, 1978.891479],
    [-151.1220093, -529.1920776, 1880.799194],
    [54.94152832, -950.225708, 1962.840088],
    [-151.1220093, -918.9759521, 1880.799194],
    [441.7904968, -14.85776138, 2532.125244],
    [-574.8255005, 43.61886597, 1850.846313],
    [-29.73426056, 374.6060486, 2126.831543],
    [-29.73426056, 374.6060486, 2126.831543]
])

set_B_0 = np.array([
    [0.4421782494, 846.5827026, 2020.174927],
    [4.503160477, 732.8519287, 1983.15564],
    [14.08492088, 392.8948364, 1971.122437],
    [29.84939957, 185.4248962, 1953.438477],
    [174.5722046, 664.00354, 2022.491211],
    [-163.0739746, 648.9627686, 1973.596313],
    [353.6298523, 448.6409912, 2082.953613],
    [-343.5235291, 430.5122986, 1930.984741],
    [552.4595947, 291.0372925, 2018.428101],
    [-566.6660767, 375.7433472, 1805.511719],
    [136.7871094, 130.3588867, 1971.227051],
    [-76.92234039, 129.2266998, 1952.01416],
    [165.2666168, -323.7376099, 1871.0354],
    [-72.23951721, -318.8250427, 1824.418213],
    [201.6125031, -718.5935669, 1801.733276],
    [-86.38376617, -692.3369751, 1675.00647],
    [592.2255249, 259.5165405, 2005.522949],
    [-611.2945557, 364.7895508, 1780.417114],
    [6.933235168, 646.6338501, 1980.103882],
    [6.933235168, 646.6338501, 1980.103882]
])

set_A_50 = np.array([[57.63186264038086,	543.0914916992188,	1637.654296875], [72.53990936279297,	428.4141845703125,	1658.3931884765625],	[86.81629943847656,	165.06307983398438,	1854.35205078125],	[88.29469299316406,	-28.917312622070312,	1874.514404296875],	[240.7890625,	353.2597351074219,	1673.91162109375],	[-76.6829605102539,	345.64703369140625,	1729.6597900390625],	[421.82696533203125,	163.97210693359375,	1727.7235107421875],	[-241.24923706054688,	194.07469177246094,	1876.0975341796875],	[608.8221435546875,	67.18851470947266,	1604.21484375],	[-470.66357421875,	130.75794982910156,	1821.79541015625],	[193.81671142578125,	-84.00901794433594,	1887.556640625],	[-11.094680786132812,	-85.82386779785156,	1910.806884765625],	[193.93463134765625,	-434.2275390625,	1687.4622802734375],	[-21.697172164916992,	-457.49273681640625,	1754.4718017578125],	[178.5402069091797,	-802.8812866210938,	1759.084228515625],	[-10.722647666931152,	-833.1898193359375,	1756.353759765625],	[646.22119140625,	47.83179473876953,	1579.5130615234375],	[-516.5464477539062,	118.0946044921875,	1810.9349365234375],	[76.0395278930664,	363.8580017089844,	1706.4293212890625],	[76.0395278930664,	363.8580017089844,	1706.4293212890625]])
set_B_50 = np.array([[56.17872619628906,	825.3435668945312,	1934.024658203125],	[68.75387573242188,	718.2599487304688,	1882.86669921875],	[66.90169525146484,	410.4596252441406,	1920.5413818359375],	[63.6473388671875,	218.5729217529297,	1906.4451904296875],	[235.1640167236328,	653.328857421875,	1889.86181640625],	[-88.30923461914062,	653.6531982421875,	1938.6741943359375],	[406.684814453125,	443.08062744140625,	1902.122314453125],	[-251.48704528808594,	477.0599670410156,	2065.014404296875],	[578.5302734375,	350.1893615722656,	1731.7166748046875],	[-503.6893005371094,	418.6646423339844,	2051.532958984375],	[163.1868896484375,	131.5357666015625,	1903.6134033203125],	[-36.401123046875,	130.179931640625,	1906.3321533203125],	[174.0584259033203,	-266.00677490234375,	1792.351318359375],	[-56.444950103759766,	-264.77703857421875,	1787.400390625],	[175.10081481933594,	-639.0945434570312,	1725.1732177734375],	[-87.42356872558594,	-631.900146484375,	1698.12841796875],	[612.8993530273438,	331.6111145019531,	1697.635498046875],	[-554.1297607421875,	406.9855651855469,	2048.836669921875],	[68.26522064208984,	637.0535888671875,	1892.806396484375],	[68.26522064208984,	637.0535888671875,	1892.806396484375]])

set_A_negative_100 = np.array([
    [-100.6446381, 590.8295288, 2127.907715],
    [-102.839653, 485.1557007, 2071.204102],
    [-97.92722321, 163.4045105, 2023.613403],
    [-105.9995728, -33.04299927, 1993.766968],
    [10.26622772, 369.5860901, 2153.61792],
    [-188.5793152, 395.2279358, 1938.905029],
    [25.44602013, 152.8755493, 2329.253418],
    [-245.3615723, 195.4145966, 1752.110718],
    [158.7783356, 25.92199326, 2504.526611],
    [-318.2572937, 111.6698608, 1523.44397],
    [-31.76225281, -156.4342957, 2037.293823],
    [-195.8850403, -143.6479034, 1934.688477],
    [-9.918453217, -572.430542, 1950.229614],
    [-126.2709198, -527.2630615, 1764.091064],
    [-9.918453217, -962.454834, 1950.229614],
    [-126.2709198, -917.2873535, 1764.091064],
    [213.1856689, -25.8824234, 2576.04834],
    [-332.8364258, 94.9209137, 1477.710571],
    [-101.5774765, 402.4866028, 2058.976318],
    [-101.5774765, 402.4866028, 2058.976318]
])

set_B_negative_100 = np.array([
    [-100.9927597, 881.0462646, 2259.145508],
    [-99.61157227, 767.7984619, 2201.117676],
    [-111.8251877, 410.1663513, 2185.105713],
    [-120.0878525, 201.6820374, 2160.949463],
    [41.38299561, 661.000061, 2267.433594],
    [-236.7266388, 670.7046509, 2114.772705],
    [155.6456909, 426.5021057, 2381.501709],
    [-382.4708557, 454.7516479, 1999.969727],
    [314.4979553, 305.5342102, 2547.892334],
    [-579.59375, 317.0725403, 1901.277466],
    [-28.0827713, 90.70359802, 2193.605225],
    [-228.9209442, 105.2410736, 2134.024658],
    [-22.44284439, -323.4290466, 2096.323975],
    [-224.5837402, -287.3295898, 1970.10144],
    [-29.7409687, -723.4078979, 2085.464111],
    [-249.8445587, -680.0551758, 1897.418579],
    [346.2684021, 281.3406372, 2581.17041],
    [-619.0183105, 289.5367126, 1881.539063],
    [-102.5356598, 682.177063, 2197.28418],
    [-102.5356598, 682.177063, 2197.28418]
])

set_A_negative_50 = np.array([
    [-51.49824524, 611.1008911, 2014.065674],
    [-31.19499779, 502.4589844, 1967.742432],
    [-18.26535416, 172.241272, 1924.263916],
    [-10.73207664, -25.85025024, 1891.001099],
    [101.1758499, 438.8035889, 1865.011597],
    [-151.4675598, 395.8236084, 2047.058838],
    [233.2998047, 231.5967255, 1759.029785],
    [-261.5220642, 193.7119598, 2183.669434],
    [344.0834351, 145.5079498, 1557.228027],
    [-468.8987427, 89.53951263, 2264.609131],
    [85.42549133, -94.86264038, 1842.36438],
    [-92.73543549, -126.2135162, 1910.870972],
    [88.39533997, -466.2610168, 1694.460815],
    [-98.85761261, -518.2131348, 1832.64209],
    [88.39533997, -837.0533447, 1694.460815],
    [-62.03155518, -883.4549561, 1780.401245],
    [366.2401733, 128.2901917, 1516.867676],
    [-510.3740845, 68.70502472, 2280.797119],
    [-28.11281586, 423.741333, 1957.37793],
    [-28.11281586, 423.741333, 1957.37793]
])

set_B_negative_50 = np.array([
    [-51.72336578, 852.3710327, 2266.043701],
    [-42.01823425, 723.6643066, 2220.698242],
    [-57.71773529, 363.9734192, 2220.628906],
    [-62.0352478, 145.3225708, 2197.466309],
    [133.9740601, 637.4053955, 2227.923096],
    [-223.2506104, 650.7598267, 2238.186768],
    [323.7530212, 392.9703064, 2226.027344],
    [-417.8745728, 410.4091187, 2227.179199],
    [598.9611816, 333.9431458, 2201.739258],
    [-646.8951416, 245.1497498, 2234.432129],
    [55.35675049, 99.99336243, 2216.618652],
    [-179.2785339, 101.740509, 2220.55835],
    [47.33940887, -362.8037109, 2058.660156],
    [-199.443985, -357.4916992, 2053.539063],
    [43.61613846, -795.8317871, 2099.822754],
    [-204.2683258, -792.4168701, 2059.726807],
    [654.0028076, 322.1377258, 2196.881592],
    [-692.6992798, 212.0978699, 2235.882813],
    [-46.08293915, 630.5379639, 2220.680176],
    [-46.08293915, 630.5379639, 2220.680176]
])

def chamfer_distance(set1, set2):
    dist_matrix = distance.cdist(set1, set2, 'euclidean')
    dist1 = np.mean(np.min(dist_matrix, axis=1))
    dist2 = np.mean(np.min(dist_matrix, axis=0))
    return (dist1 + dist2) / 2

# Calculate Chamfer Distance
chamfer_dist_100 = chamfer_distance(set_A_100, set_B_100)
print(f"Chamfer Distance 100: {chamfer_dist_100}")

chamfer_dist_50 = chamfer_distance(set_A_50, set_B_50)
print(f"Chamfer Distance 50: {chamfer_dist_50}")

chamfer_dist_0 = chamfer_distance(set_A_0, set_B_0)
print(f"Chamfer Distance 0: {chamfer_dist_0}")

chamfer_dist_negative_50 = chamfer_distance(set_A_negative_50, set_B_negative_50)
print(f"Chamfer Distance -50: {chamfer_dist_negative_50}")

chamfer_dist_negative_100 = chamfer_distance(set_A_negative_100, set_B_negative_100)
print(f"Chamfer Distance -100: {chamfer_dist_negative_100}")
